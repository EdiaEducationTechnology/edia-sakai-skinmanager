<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">
<beans>

	<bean id="nl.edia.sakai.tool.skinmanager.FlowContinuationStartController" class="nl.edia.masla.spring.webflow.SessionContinuationController">
		<property name="view" value="skinmanager.spring" />
	</bean>

	<bean name="nl.edia.sakai.tool.skinmanager.FlowController" class="org.springframework.webflow.executor.mvc.FlowController">
		<property name="flowExecutor" ref="nl.edia.sakai.tool.skinmanager.FlowExecutor" />
		<property name="defaultFlowId" value="skinmanager-main-flow" />
	</bean>

	<bean id="nl.edia.sakai.tool.skinmanager.download.SkinDowloadController" class="nl.edia.sakai.tool.skinmanager.download.SkinDowloadController">
		<property name="skinArchiveService" ref="nl.edia.sakai.tool.skinmanager.SkinArchiveService" />
		<property name="errorView" value="accessdenied" />
	</bean>

	<!-- Launches new flow executions and resumes existing executions: Spring 1.2 config version -->
	<bean id="nl.edia.sakai.tool.skinmanager.FlowExecutor" class="org.springframework.webflow.config.FlowExecutorFactoryBean">
		<property name="definitionLocator" ref="nl.edia.sakai.tool.skinmanager.FlowRegistry" />
		<property name="executionAttributes">
			<map>
				<entry key="alwaysRedirectOnPause">
					<value type="java.lang.Boolean">true</value>
				</entry>
			</map>
		</property>
		<property name="repositoryType" value="CONTINUATION" />
	</bean>

	<!-- Creates the registry of flow definitions for this application: Spring 1.2 config version -->
	<bean id="nl.edia.sakai.tool.skinmanager.FlowRegistry" class="org.springframework.webflow.engine.builder.xml.XmlFlowRegistryFactoryBean">
		<property name="flowDefinitions">
			<value>
				skinmanager-main-flow=/WEB-INF/flows/skinmanager-main-flow.xml skinmanager-detail-flow=/WEB-INF/flows/skinmanager-detail-flow.xml
				skinmanager-new-flow=/WEB-INF/flows/skinmanager-new-flow.xml
			</value>
		</property>
	</bean>

	<import resource="flows/skinmanager-beans.xml" />

</beans>